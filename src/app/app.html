<nav class="navbar navbar-light bg-faded">
    <img class="navbar-brand" src="https://cafe-trauma.com/images/cafe_logo_white.png">
    <h2 class="navbar-brand">CAFE</h2>
    <div class="nav-buttons float-xs-right">
    <a *ngIf="user && user.is_staff" href="/admin" target="_"> <button type="button" class="nav-item btn btn-secondary">Admin</button></a>
    <a *ngIf="user" routerLink="/user"> <button type="button" class="nav-item btn btn-secondary">Quesionnaire Management</button></a>
    </div>
</nav>
<div class="main">
    <app-error id='errorBar'></app-error>
    <div class="registration" *ngIf="!finished">
      <img class="logo" src="https://cafe-trauma.com/cafe_logo.png">
      <p>
        Welcome to the CAFE questionnaire.
        This questionnaire is designed to assist in pre-assesment of Trauma Centers and Trauma Systems for ACS verification.
        The questions collect non-identifying information about your institution and stores them for use by public health researchers.
        No registration is required to being answering questions, however if you would like to access your answers or complete the questionnaire at a later time please provide an email address below.
        This email will only be used for providing a link back to your quesionnaire and never shared with any third parties.
        Finally this questionnaire relies on cookies to function and by starting one you consent to their use.
      </p>
      <div class="startSelect">
        <p>Would you like to create a new quesionnaire or continue a previous one?</p>
        <button class="btn btn-lg btn-light"
                [class.btn-secondary]="register"
                (click)="newQuestionnaire()">
                New Questionnaire</button>
        <button class="btn btn-lg btn-light"
                [class.btn-secondary]="retrieval"
                (click)="retrieveQuesionnaire()">
                Retrieve Previous Quesionnaire</button>
      </div>
      <form class="form-box" *ngIf="register">
        <div class="form-group">
          <label for="email">Optional email address for quesionnaire retrieval</label>
          <input class="form-control" name="email" [(ngModel)]="email" placeholder="Email Address" type="email">
        </div>
        <p>There are two separate questionnaires, please select the one you would like to start with and you will be taken to it.</p>
        <div class="form-group new-buttons">
          <button class="btn btn-primary" (click)="startQuestionnaire('center')">Trauma Center</button>
          <button class="btn btn-primary" (click)="startQuestionnaire('system')">Trauma System</button>
        </div>
      </form>

      <div class="form-box" *ngIf="retrieval">
        <p>If you have previously started or completed a questionnaire and would like to retrieve it please enter your registered email address and an email will be sent with a link to your questionnaire.</p>
        <input [(ngModel)]="email2" placeholder="Email Address" type="email">
        <button class="btn btn-primary" (click)="retrieveUser()">Send Email</button>
    </div>
    <router-outlet *ngIf="user"></router-outlet>
</div>
